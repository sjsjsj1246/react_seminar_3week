(this.webpackJsonpreact_seminar_3week=this.webpackJsonpreact_seminar_3week||[]).push([[0],{11:function(t,e,n){t.exports={todoItemContainer:"TodoItem_todoItemContainer__zWW7L",todoCheckbox:"TodoItem_todoCheckbox__1WTFq",description:"TodoItem_description__3IEkt",isCompleted:"TodoItem_isCompleted__2ojP4",editButton:"TodoItem_editButton__3mEQv",deleteButton:"TodoItem_deleteButton__3qpPf"}},12:function(t,e,n){t.exports={loginContainer:"Login_loginContainer__16X0b",loginForm:"Login_loginForm__dVtd9",field:"Login_field__1wWqH",input:"Login_input__2Ek5t",signupButton:"Login_signupButton__2Gr_f",button:"Login_button__3B3H1"}},13:function(t,e,n){t.exports={loginContainer:"Register_loginContainer__3Kk-a",loginForm:"Register_loginForm__2XoNT",field:"Register_field__3TYYJ",input:"Register_input__34ki7",loginButton:"Register_loginButton__2h8kF",button:"Register_button__sE4By"}},21:function(t,e,n){t.exports={todoContainer:"TodoList_todoContainer__2sTdO",todoForm:"TodoList_todoForm__3Bm4p",logoutButton:"TodoList_logoutButton__1Bi_P",todoList:"TodoList_todoList__4kBB9",createTodoForm:"TodoList_createTodoForm__1FwY_"}},75:function(t,e,n){},76:function(t,e,n){"use strict";n.r(e);var r,a=n(1),o=n(24),c=n.n(o),s=n(9),u=n(19),i=n(43),p=n(44),d=n.n(p),l=n(45),f=n(14),j=n(5),O=n(16),b=n(4),h=n(3),v=n.n(h),_=n(6),m=n(79),x=n(78),y=n(10),T=n.n(y),g=function(){var t=Object(_.a)(v.a.mark((function t(e){var n,r,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,r=e.password,t.next=3,T()({method:"post",url:"/api/auth/register",data:{username:n,password:r}});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Object(_.a)(v.a.mark((function t(e){var n,r,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,r=e.password,t.next=3,T()({method:"post",url:"/api/auth/login",data:{username:n,password:r}});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(_.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"post",url:"/api/auth/logout"});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Object(_.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"get",url:"/api/auth/check"});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k="user/CHECK",L="user/CHECK_SUCCESS",S="user/CHECK_FAILURE",I="user/INIT_USER",N=(Object(m.a)(I),function(){return function(){var t=Object(_.a)(v.a.mark((function t(e){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:k}),t.prev=1,t.next=4,w();case 4:n=t.sent,e({type:L,payload:n.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e({type:S,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}),R={user:null,checkError:null,success:null},D=Object(x.a)((r={},Object(O.a)(r,I,(function(t){return R})),Object(O.a)(r,k,(function(t){return Object(b.a)(Object(b.a)({},t),{},{success:!1})})),Object(O.a)(r,L,(function(t,e){var n=e.payload;return Object(b.a)(Object(b.a)({},t),{},{user:n,checkError:null,success:!0})})),Object(O.a)(r,S,(function(t,e){var n=e.payload;return Object(b.a)(Object(b.a)({},t),{},{user:null,checkError:n,success:!0})})),r),R),F=n(28),B=n(12),U=n.n(B),G=n(2),A=function(t){var e=t.onLogin,n=t.errorMessage,r=Object(a.useRef)(),o=Object(a.useRef)(),c=function(){e({username:r.current.value,password:o.current.value})};return Object(G.jsx)("div",{className:U.a.loginContainer,children:Object(G.jsxs)("div",{className:U.a.loginForm,children:[Object(G.jsxs)("div",{className:U.a.field,children:[Object(G.jsx)("p",{children:"ID"}),Object(G.jsx)("input",{className:U.a.input,ref:r,type:"text"})]}),Object(G.jsxs)("div",{className:U.a.field,children:[Object(G.jsx)("p",{children:"PASSWORD"}),Object(G.jsx)("input",{className:U.a.input,ref:o,onKeyPress:function(t){"Enter"===t.key&&c()},type:"password"})]}),Object(G.jsx)(f.b,{to:"/register",className:U.a.signupButton,children:"\ud68c\uc6d0\uac00\uc785"}),Object(G.jsx)("button",{className:U.a.button,onClick:c,children:"\ub85c\uadf8\uc778"}),Object(G.jsx)("p",{children:n})]})})},P="auth/LOGIN_SUCCESS",K="auth/LOGIN_FAILURE",W="auth/LOGOUT_SUCCESS",H="auth/LOGOUT_FAILURE",q="auth/REGISTER_SUCCESS",J="auth/REGISTER_FAILURE",M={auth:null,error:null,loading:null,success:null},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case P:return Object(b.a)(Object(b.a)({},t),{},{auth:e.payload});case K:return Object(b.a)(Object(b.a)({},t),{},{error:e.payload});case W:return Object(b.a)(Object(b.a)({},t),{},{auth:e.payload});case H:return Object(b.a)(Object(b.a)({},t),{},{error:e.payload});case q:return Object(b.a)(Object(b.a)({},t),{},{auth:e.payload});case J:return Object(b.a)(Object(b.a)({},t),{},{error:e.payload});default:return t}},X=function(t){var e=Object(s.c)((function(t){return t.auth})),n=e.auth,r=e.error,o=Object(s.c)((function(t){return t.user})).user,c=Object(a.useState)(""),u=Object(F.a)(c,2),i=u[0],p=u[1],d=Object(j.e)(),l=Object(s.b)();return Object(a.useEffect)((function(){r&&p("\uc544\uc774\ub514\uc640 \ud328\uc2a4\uc6cc\ub4dc\ub97c \ub2e4\uc2dc \uc785\ub825\ud574\uc8fc\uc138\uc694"),n&&l(N())}),[n,r,l]),Object(a.useEffect)((function(){o&&(alert("".concat(o.username,"\ub2d8 \uc548\ub155\ud558\uc138\uc694!")),d.push("/todo"))}),[o,d]),Object(G.jsx)(A,{onLogin:function(t){var e=t.username,n=t.password;l(function(t){var e=t.username,n=t.password;return function(){var t=Object(_.a)(v.a.mark((function t(r){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:"auth/LOGIN"}),t.prev=1,t.next=4,E({username:e,password:n});case 4:a=t.sent,r({type:P,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r({type:K,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}({username:e,password:n}))},errorMessage:i})},z=function(t){return Object(G.jsx)(X,{})},Q=n(13),V=n.n(Q),Z=function(t){var e=t.onRegister,n=Object(a.useRef)(),r=Object(a.useRef)();return Object(G.jsx)("div",{className:V.a.loginContainer,children:Object(G.jsxs)("div",{className:V.a.loginForm,children:[Object(G.jsxs)("div",{className:V.a.field,children:[Object(G.jsx)("p",{children:"ID"}),Object(G.jsx)("input",{className:V.a.input,ref:n,type:"text"})]}),Object(G.jsxs)("div",{className:V.a.field,children:[Object(G.jsx)("p",{children:"PASSWORD"}),Object(G.jsx)("input",{className:V.a.input,ref:r,type:"password"})]}),Object(G.jsx)(f.b,{to:"/",className:V.a.loginButton,children:"\ub85c\uadf8\uc778"}),Object(G.jsx)("button",{className:V.a.button,onClick:function(){e({username:n.current.value,password:r.current.value})},children:"\ud68c\uc6d0\uac00\uc785"})]})})},$=function(t){var e=Object(j.e)();return Object(G.jsx)(Z,{onRegister:function(t){var n=t.username,r=t.password;g({username:n,password:r}).then((function(){e.push("/todo")}))}})},tt=function(t){return Object(G.jsx)($,{})},et=n(21),nt=n.n(et),rt=n(11),at=n.n(rt),ot=n(29),ct=n(46),st=function(t){var e=t.todo,n=t.deleteTodo,r=t.toggledTodo,o=t.editTodo,c=Object(a.useState)(!1),s=Object(F.a)(c,2),u=s[0],i=s[1],p=Object(a.useRef)(),d=function(){""!==p.current.value&&o(e.id,p.current.value)};return document.body.onclick=function(){u&&(d(),i(!1))},Object(G.jsxs)("div",{className:"".concat(at.a.todoItemContainer," ").concat(e.isCompleted&&at.a.isCompleted),children:[Object(G.jsx)("div",{className:at.a.todoCheckbox,onClick:function(t){t.stopPropagation(),r(e.id)},children:e.isCompleted&&Object(G.jsx)(ot.a,{color:"#FA2060"})}),u?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("input",{autoFocus:!0,ref:p,onKeyPress:function(t){"Enter"===t.key&&(d(),i(!1))},className:at.a.description}),Object(G.jsx)(ct.a,{className:at.a.editButton,onClick:function(t){t.stopPropagation(),i(!1),d()}})]}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("p",{className:"".concat(at.a.description," ").concat(e.isCompleted&&at.a.isCompleted),onClick:function(t){t.stopPropagation(),r(e.id)},children:e.content}),Object(G.jsx)(ot.b,{className:at.a.editButton,onClick:function(t){t.stopPropagation(),i(!0)}})]}),Object(G.jsx)(ot.c,{className:at.a.deleteButton,onClick:function(t){t.stopPropagation(),n(e.id)}})]})},ut=Object(a.memo)(st),it=function(t){var e=t.todoList,n=t.onCreateTodo,r=t.onDeleteTodo,o=t.onEditTodo,c=t.onToggleTodo,s=t.onLogout,u=Object(a.useRef)(),i=(Object(j.e)(),function(t){""!==t&&(n(t),u.current.value="")}),p=function(t){r(t)},d=function(t){c(t)},l=function(t,e){""!==e&&o({id:t,content:e})};return Object(G.jsx)("div",{className:nt.a.todoContainer,children:Object(G.jsxs)("div",{className:nt.a.todoForm,children:[Object(G.jsx)("button",{className:nt.a.logoutButton,onClick:s,children:"\ub85c\uadf8\uc544\uc6c3"}),Object(G.jsx)("div",{className:nt.a.todoList,children:e.map((function(t){return Object(G.jsx)(ut,{todo:t,deleteTodo:p,toggledTodo:d,editTodo:l},t.id)}))}),Object(G.jsxs)("div",{className:nt.a.createTodoForm,children:[Object(G.jsx)("input",{type:"text",ref:u,onKeyPress:function(t){"Enter"===t.key&&i(u.current.value)}}),Object(G.jsx)("button",{onClick:function(){i(u.current.value)},children:"\ucd94\uac00\ud558\uae30"})]})]})})},pt=function(){var t=Object(_.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"get",url:"/api/todos"});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),dt=function(){var t=Object(_.a)(v.a.mark((function t(e){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"post",url:"/api/todos",data:{content:e}});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),lt=function(){var t=Object(_.a)(v.a.mark((function t(e){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"delete",url:"/api/todos/".concat(e)});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ft=function(){var t=Object(_.a)(v.a.mark((function t(e){var n,r,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,r=e.content,t.next=3,T()({method:"patch",url:"/api/todos/".concat(n),data:{content:r}});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),jt=function(){var t=Object(_.a)(v.a.mark((function t(e){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"patch",url:"/api/todos/complete/".concat(e)});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ot="todos/GET_TODO_LIST_SUCCESS",bt="todos/GET_TODO_LIST_FAILURE",ht="todos/CREATE_TODO_FAILURE",vt="todos/DELETE_TODO_FAILURE",_t="todos/EDIT_TODO_FAILURE",mt="todos/TOGGLE_TODO_FAILURE",xt="todos/SET_LOADING",yt={todoList:[],error:null,loading:!1};var Tt=function(t){var e=Object(j.e)(),n=Object(s.c)((function(t){return t.auth})).auth,r=Object(s.c)((function(t){return t.user})).user,o=Object(s.c)((function(t){return t.todos})),c=o.todoList,u=o.loading,i=Object(s.b)();return Object(a.useEffect)((function(){!1===u&&i(function(){var t=Object(_.a)(v.a.mark((function t(e){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:"todos/GET_TODO_LIST"}),t.prev=1,t.next=4,pt();case 4:n=t.sent,e({type:Ot,payload:n.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e({type:bt,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}())}),[i,u]),Object(a.useEffect)((function(){i(N())}),[n,i]),Object(a.useEffect)((function(){r||e.push("/")}),[r,i]),c?Object(G.jsx)(it,{todoList:c,onCreateTodo:function(t){i(function(t){return function(){var e=Object(_.a)(v.a.mark((function e(n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"todos/CREATE_TODO"}),n({type:xt,payload:!0}),e.prev=2,e.next=5,dt(t);case 5:r=e.sent,n({type:"todos/CREATE_TODO_SUCCESS",payload:r.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n({type:ht,payload:e.t0});case 12:n({type:xt,payload:!1});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}(t))},onDeleteTodo:function(t){i(function(t){return function(){var e=Object(_.a)(v.a.mark((function e(n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"todos/DELETE_TODO"}),n({type:xt,payload:!0}),e.prev=2,e.next=5,lt(t);case 5:r=e.sent,n({type:"todos/DELETE_TODO_SUCCESS",payload:r.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n({type:vt,payload:e.t0});case 12:n({type:xt,payload:!1});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}(t))},onEditTodo:function(t){var e=t.id,n=t.content;i(function(t){var e=t.id,n=t.content;return function(){var t=Object(_.a)(v.a.mark((function t(r){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:"todos/EDIT_TODO"}),r({type:xt,payload:!0}),t.prev=2,t.next=5,ft({id:e,content:n});case 5:a=t.sent,r({type:"todos/EDIT_TODO_SUCCESS",payload:a.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),r({type:_t,payload:t.t0});case 12:r({type:xt,payload:!1});case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}({id:e,content:n}))},onToggleTodo:function(t){i(function(t){return function(){var e=Object(_.a)(v.a.mark((function e(n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"todos/TOGGLE_TODO"}),n({type:xt,payload:!0}),e.prev=2,e.next=5,jt(t);case 5:r=e.sent,n({type:"todos/TOGGLE_TODO_SUCCESS",payload:r.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n({type:mt,payload:e.t0});case 12:n({type:xt,payload:!1});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}(t))},onLogout:function(){i(function(){var t=Object(_.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:"auth/LOGOUT"}),t.prev=1,t.next=4,C();case 4:t.sent,e({type:W,payload:"\ub85c\uadf8\uc544\uc6c3 \uc131\uacf5"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e({type:H,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}())}}):Object(G.jsx)("div",{children:"\ub85c\ub529\uc911..."})},gt=function(t){return Object(G.jsx)(Tt,{})};var Et=function(){var t=Object(s.b)();return Object(a.useEffect)((function(){t(N())})),Object(G.jsxs)(f.a,{children:[Object(G.jsx)(j.a,{exact:!0,path:"/",component:z}),Object(G.jsx)(j.a,{path:"/register",component:tt}),Object(G.jsx)(j.a,{path:"/todo",component:gt})]})},Ct=(n(75),Object(u.combineReducers)({todos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Ot:return Object(b.a)(Object(b.a)({},t),{},{todoList:e.payload});case bt:case ht:case vt:case _t:case mt:return Object(b.a)(Object(b.a)({},t),{},{error:e.payload});case xt:return Object(b.a)(Object(b.a)({},t),{},{loading:e.payload});default:return t}},auth:Y,user:D})),wt=Object(u.createStore)(Ct,Object(i.composeWithDevTools)(Object(u.applyMiddleware)(l.a,d.a)));c.a.render(Object(G.jsx)(s.a,{store:wt,children:Object(G.jsx)(Et,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.a0abb335.chunk.js.map